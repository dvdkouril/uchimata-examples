<!doctype html>
<notebook>
  <title>uchimata: getting started</title>
  <script type="text/markdown">
    # uchimata: getting started
  </script>
	<script type="module" pinned>
    import * as uchi from "npm:uchimata";
	</script>
  <script type="module" pinned>
const viewConfig = ({ 
    scale: 0.005,     
    color: {
      field: "chr", //~ uses the 'chr' column in the Arrow table that defines the structure
      colorScale: "spectral",
    },
    links: true,
  });
  
  //~ create a scene
  let chromatinScene = uchi.initScene();
  chromatinScene = uchi.addStructureToScene(chromatinScene, model, viewConfig);

  const [renderer, canvas] = uchi.display(chromatinScene, { alwaysRedraw: false});
  
  //~ ObservableHQ mechanism for clean-up after cell re-render
  invalidation.then(() => renderer.endDrawing());

  display(renderer.getCanvasElement());
	// display(chs.initScene());
  </script>
<script type="module" pinned>
const urlStevens = "https://pub-5c3f8ce35c924114a178c6e929fc3ac7.r2.dev/Stevens-2017_GSM2219497_Cell_1_model_5.arrow";
	</script>
<script type="module" pinned>
const model = await uchi.loadFromURL(urlStevens, {
  center: true,
  normalize: true,
});
	</script>
</notebook>
